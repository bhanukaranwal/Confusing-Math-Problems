# Problem 2 — Functional Set Families with Disjoint Sums

## Problem Statement

Let $S$ be a set of $n$ distinct positive integers ($2 \leq n \leq 20$), and let $m$ be a positive integer ($1 \leq m < 10^9$).

You are to construct a family $\mathcal{A}$ of non-empty subsets of $S$ with the following properties:

- For any subsets $A, B \in \mathcal{A}$, $A \neq B$, the subset sums $\sum_{a \in A} a$ and $\sum_{b \in B} b$ are **not congruent modulo $m$**.
- For any $A \in \mathcal{A}$, $|A| \geq 2$ and $|A| \leq k$ for some $k \leq n$.
- No two sets in $\mathcal{A}$ share any element (that is, for every $A, B \in \mathcal{A}$, $A \cap B = \varnothing$).

Your task:

Given $n$, $m$, and the set $S$, **find the maximum possible family size $f(n, m, S, k)$ over all possible $2 \leq k \leq n$**, and **construct an explicit family $\mathcal{A}$ achieving this size** (for any $k$ you choose).

Output the maximum $f$, your chosen value $k$, and then each subset in $\mathcal{A}$ as a sequence (space-separated elements, in increasing order).

---

## Input

- First line: $n~m$ ($2 \leq n \leq 20$, $1 \leq m < 10^9$)
- Second line: $s_1~s_2~...~s_n$ (distinct positive integers, $1 \leq s_i < 10^9$)

---

## Output

- First line: integer $f$, your chosen value $k$
- Next $f$ lines: each line gives a subset in $\mathcal{A}$, as space-separated sorted numbers

---

## Sample Input

5 7
2 4 6 8 15



---

## Sample Output

2 2
2 4
6 15



---

### Notes

- The output subsets must be pairwise disjoint, and all their sums must have different residues modulo $m$.
- You may choose any $k$ ($2 \leq k \leq n$) you wish to maximize the family.
- There may be multiple valid answers—any maximal construction is accepted.

---

## Constraints

- Elements in output subsets are strictly from $S$, and subsets must be of size at least $2$ and at most $k$.
- No overlap of elements between subsets.
- Each subset sum modulo $m$ must be unique within the family.

---

## Extra Sample Test Cases

4 5
1 2 3 7

8 15
2 4 7 10 12 17 21 28



---

## Further Explanation and Requirements

To solve, you must:

- Explore possible partitions of $S$ into disjoint subsets of size $\geq 2$ and $\leq k$.
- For each candidate family, check the uniqueness of subset sums modulo $m$.
- Output any maximal family—the largest possible number of such subsets, with their explicit composition.

---

**End of Problem**
