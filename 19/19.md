# Problem 19 â€” Maximal Collinearity-Free Flag Sets in Projective Planes Over Finite Fields

## Problem Statement

Let $q$ be a prime power ($5 \leq q \leq 19$), and let $\mathbb{P}^2(\mathbb{F}_q)$ be the projective plane of order $q$ (the set of points and lines over the field $\mathbb{F}_q$).

A **flag** is a pair $(P, \ell)$ where $P$ is a point lying on line $\ell$.  
Let $X$ be a subset of flags with these properties:

1. **Collinearity-Free:** There are no three distinct flags $(P_1, \ell_1)$, $(P_2, \ell_2)$, $(P_3, \ell_3)$ in $X$ such that $P_1, P_2, P_3$ are collinear (that is, all lie on the same projective line), regardless of the associated lines.
2. **Symmetry-Invariance:** $X$ is invariant under the natural action of the projective general linear group $\mathrm{PGL}(3, \mathbb{F}_q)$ (i.e., for any automorphism $\phi$ of $\mathbb{P}^2(\mathbb{F}_q)$, $(P, \ell) \in X$ iff $(\phi(P), \phi(\ell)) \in X$).
3. **Maximality:** $X$ is as large as possible under these constraints.

Your tasks:

- Given $q$, **construct such a maximal subset $X$** (list the flags as pairs of coordinates and line equations), in lexicographic order.
- Output the size $t = |X|$ and all flags in $X$.
- For verification, output all ordered triples of flags from $X$, and for each, confirm whether their points are collinear.  
- Provide a structural description or listing of symmetry-invariant properties of your set (for instance, the orbit structure under the action).

---

## Input

- Single integer: $q$ ($5 \leq q \leq 19$, $q$ is a prime power)

---

## Output

- First line: $t$ (size of maximal $X$ set)
- Next $t$ lines: each is a flag as $P: [x, y, z],\ \ell: [a, b, c]$ (point and line as homogeneous coordinates over $\mathbb{F}_q$)
- Next $\binom{t}{3}$ lines: for each ordered triple of flags, output indices and whether $P_1, P_2, P_3$ are collinear (YES/NO)
- Next, output a description of the symmetry properties of your set (e.g., stabilizer group structure, invariant subsets, etc.)

---

## Sample Input

7

text

---

## Sample Output

7
,
[0, [3,2, [1, 2 3: NO
1 2 4: NO
...
Symmetry description: Set is stabilized by subgroup of $\mathrm{PGL}(3, \mathbb{F}_7)$ of size xxx; all flags form a single orbit under the group action.

text

---

### Notes

- Projective points are nonzero triples $[x, y, z]$ over $\mathbb{F}_q$, up to scale.
- Lines are nontrivial $[a, b, c]$ interpreted as solutions $ax + by + cz = 0$.
- Collinearity can be checked by determinant or rank test on $(x, y, z)$ coordinates.
- The set should be as large as possible while respecting the forbidden configuration and the symmetry invariance.
- Multiple possible outputs may exist; any valid maximal solution is accepted.

---

## Constraints

- $5 \leq q \leq 19$, prime power

---

## Extra Sample Test Cases

8

9

text

---

## Further Explanation and Requirements

You must:

- Generate flags as point-line pairs,
- Ensure the collinearity-free and symmetry-invariant conditions,
- Output triple verifications and describe group-theoretic structure.

---

**End of Problem**
